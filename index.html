<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Toâ€‘Do List</title>
  <meta name="description" content="è¼•é‡ã€å¯é›¢ç·šã€æ”¯æ´æ‹–æ›³æ’åºèˆ‡æœ¬æ©Ÿå„²å­˜çš„å¾…è¾¦æ¸…å–®ã€‚" />
  <style>
    :root {
      --bg: #0b0f14;
      --panel: #121820;
      --panel-2: #0f141b;
      --text: #e8eef6;
      --muted: #a6b3c2;
      --brand: #7dd3fc; /* sky-300 */
      --ok: #86efac;    /* green-300 */
      --warn: #fca5a5;  /* red-300 */
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --radius: 18px;
    }
    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 800px at 80% -20%, #132032, transparent 60%), var(--bg);
      color: var(--text);
      display: grid; place-items: center; padding: 24px;
    }
    .app {
      width: min(900px, 92vw); background: linear-gradient(180deg, var(--panel), var(--panel-2));
      border-radius: var(--radius); box-shadow: var(--shadow); overflow: hidden;
    }
    header {
      padding: 22px 22px 0; display: grid; gap: 14px;
    }
    .title-row { display: flex; align-items: center; justify-content: space-between; gap: 12px; }
    h1 { margin: 0; font-size: clamp(20px, 3.5vw, 32px); letter-spacing: .3px; }
    .stats { font-size: 13px; color: var(--muted); }

    form.add {
      display: grid; grid-template-columns: 1fr auto; gap: 10px; padding-bottom: 16px;
    }
    .input, .btn {
      border: 1px solid #1e293b; background: #0c121a; color: var(--text);
      padding: 12px 14px; border-radius: 14px; outline: none;
    }
    .input:focus { border-color: #334155; box-shadow: 0 0 0 3px rgba(125,211,252,.15); }
    .btn { cursor: pointer; font-weight: 600; letter-spacing: .2px; }
    .btn.primary { background: linear-gradient(180deg, #0ea5e9 0%, #0284c7 100%); border: none; }
    .btn.ghost { background: transparent; border-color: #243244; color: var(--muted); }
    .btn:disabled { opacity: .5; cursor: not-allowed; }

    .toolbar {
      display: flex; flex-wrap: wrap; gap: 8px; align-items: center; padding: 12px 22px; border-top: 1px solid #1e293b; border-bottom: 1px solid #1e293b; background: #0b121a88; backdrop-filter: blur(4px);
    }
    .toolbar .seg { display: inline-flex; border: 1px solid #1e293b; border-radius: 12px; overflow: hidden; }
    .toolbar .seg button { background: transparent; border: none; color: var(--muted); padding: 8px 12px; cursor: pointer; }
    .toolbar .seg button[aria-pressed="true"] { color: var(--text); background: #172131; }
    .toolbar .spacer { flex: 1; }

    ul.list { list-style: none; margin: 0; padding: 6px 8px 14px; max-height: 62vh; overflow: auto; }
    .empty { color: var(--muted); text-align: center; padding: 28px 10px; }

    .item { display: grid; grid-template-columns: auto 1fr auto; align-items: center; gap: 10px; margin: 8px 0; padding: 10px 12px; border: 1px solid #1e293b; background: #0c121a; border-radius: 14px; box-shadow: 0 1px 0 #0b1016 inset; }
    .handle { cursor: grab; user-select: none; padding: 6px; border-radius: 10px; opacity: .7; }
    .handle:active { cursor: grabbing; }
    .checkbox { width: 20px; height: 20px; accent-color: #22c55e; }
    .label { line-height: 1.4; padding: 8px 10px; border-radius: 10px; }
    .label[contenteditable="true"] { outline: 2px solid #1e293b; background: #0b1118; }
    .done .label { color: #94a3b8; text-decoration: line-through; }

    .actions { display: inline-flex; gap: 6px; }
    .icon-btn { border: 1px solid #1e293b; background: #0b1118; color: var(--muted); padding: 6px 8px; border-radius: 10px; cursor: pointer; }
    .icon-btn:hover { color: var(--text); background: #131c29; }

    footer { display: flex; gap: 10px; align-items: center; justify-content: flex-start; padding: 12px 22px 20px; color: var(--muted); font-size: 13px; flex-wrap: wrap; }
    .link { color: var(--brand); text-decoration: none; }
    .link:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <main class="app" aria-label="å¾…è¾¦æ¸…å–®æ‡‰ç”¨">
    <header>
      <div class="title-row">
        <h1>å¾…è¾¦æ¸…å–® Toâ€‘Do</h1>
        <div class="stats" id="stats">â€”</div>
      </div>
      <form class="add" id="add-form" autocomplete="off">
        <input id="new-task" class="input" name="task" type="text" placeholder="è¼¸å…¥æ–°å¾…è¾¦äº‹é …ï¼ŒæŒ‰ Enter æ–°å¢â€¦" aria-label="æ–°å¢å¾…è¾¦" />
        <button class="btn primary" type="submit" aria-label="æ–°å¢">æ–°å¢</button>
      </form>
    </header>

    <div class="toolbar" role="toolbar" aria-label="ç¯©é¸èˆ‡æ“ä½œ">
      <div class="seg" role="group" aria-label="é¡¯ç¤ºç¯©é¸">
        <button data-filter="all" aria-pressed="true">å…¨éƒ¨</button>
        <button data-filter="active" aria-pressed="false">é€²è¡Œä¸­</button>
        <button data-filter="completed" aria-pressed="false">å·²å®Œæˆ</button>
      </div>
      <div class="spacer"></div>
      <input id="search" class="input" type="search" placeholder="æœå°‹â€¦" aria-label="æœå°‹å¾…è¾¦" style="max-width:260px"/>
      <button id="clear-completed" class="btn ghost" title="æ¸…é™¤å·²å®Œæˆ">æ¸…é™¤å·²å®Œæˆ</button>
      <button id="export-json" class="btn ghost" title="åŒ¯å‡º JSON">åŒ¯å‡º</button>
      <button id="import-json" class="btn ghost" title="åŒ¯å…¥ JSON">åŒ¯å…¥</button>
      <input id="import-file" type="file" accept="application/json" hidden />
    </div>

    <ul id="list" class="list" aria-live="polite"></ul>
    <div id="empty" class="empty" hidden>ç›®å‰æ²’æœ‰å¾…è¾¦äº‹é …ï¼Œå¿«æ–°å¢ä¸€å€‹å§ï¼</div>

    <footer>
      <div>æœ¬æ©Ÿè‡ªå‹•å„²å­˜ â€¢ æ”¯æ´æ‹–æ›³æ’åºã€é›™æ“Šç·¨è¼¯ã€éµç›¤æ“ä½œ</div>
      <a class="link" href="https://github.com/" target="_blank" rel="noreferrer">åœ¨ GitHub Pages éƒ¨ç½²</a>

      <!-- æ–°å¢å‰å¾€æ¯æ—¥ä»»å‹™æŠ½å¡æŒ‰éˆ• -->
      <a href="https://hk-owen.github.io/card/" target="_blank" style="text-decoration:none;">
        <button style="
          margin-left: 10px;
          padding: 10px 20px; 
          font-size: 16px; 
          border: none; 
          border-radius: 8px; 
          background: #ff9800; 
          color: white; 
          cursor: pointer;
          transition: background 0.3s;
        "
        onmouseover="this.style.background='#e68900';"
        onmouseout="this.style.background='#ff9800';">
          å‰å¾€æ¯æ—¥ä»»å‹™æŠ½å¡
        </button>
      </a>
    </footer>
  </main>

  <script>
    // === Utilities ===
    const $ = (sel, el=document) => el.querySelector(sel);
    const $$ = (sel, el=document) => Array.from(el.querySelectorAll(sel));
    const uid = () => Date.now().toString(36) + Math.random().toString(36).slice(2,8);

    // === State ===
    const STORE_KEY = 'ghpages.todo.v1';
    let state = {
      items: [],
      filter: 'all',
      search: ''
    };

    function save() { localStorage.setItem(STORE_KEY, JSON.stringify(state)); }
    function load() {
      try { const raw = localStorage.getItem(STORE_KEY); if (raw) state = JSON.parse(raw); }
      catch (e) { console.warn('Load failed', e); }
      finally { render(); }
    }

    // === DOM refs ===
    const listEl = $('#list');
    const emptyEl = $('#empty');
    const statsEl = $('#stats');

    // === Rendering ===
    function render() {
      const filtered = state.items.filter(it => {
        if (state.filter === 'active' && it.done) return false;
        if (state.filter === 'completed' && !it.done) return false;
        if (state.search && !it.text.toLowerCase().includes(state.search)) return false;
        return true;
      });

      listEl.innerHTML = '';
      if (filtered.length === 0) emptyEl.hidden = false;
      else emptyEl.hidden = true;

      for (const item of filtered) {
        const li = document.createElement('li');
        li.className = 'item' + (item.done ? ' done' : '');
        li.draggable = true;
        li.dataset.id = item.id;

        const handle = document.createElement('span');
        handle.className = 'handle'; handle.title = 'æ‹–æ›³æ’åº'; handle.innerHTML = 'â‹®â‹®';

        const cb = document.createElement('input');
        cb.type = 'checkbox'; cb.className = 'checkbox'; cb.checked = item.done;
        cb.setAttribute('aria-label', 'å®Œæˆåˆ‡æ›');
        cb.addEventListener('change', () => toggleDone(item.id));

        const label = document.createElement('span');
        label.className = 'label'; label.textContent = item.text; label.tabIndex = 0;
        label.addEventListener('dblclick', () => startEdit(label, item));
        label.addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); startEdit(label, item); } });

        const actions = document.createElement('div'); actions.className = 'actions';
        const editBtn = btn('âœï¸', 'ç·¨è¼¯', () => startEdit(label, item));
        const delBtn = btn('ğŸ—‘ï¸', 'åˆªé™¤', () => remove(item.id));
        actions.append(editBtn, delBtn);

        li.append(handle, cb, label, actions);
        listEl.append(li);
      }

      const total = state.items.length;
      const completed = state.items.filter(i => i.done).length;
      const active = total - completed;
      statsEl.textContent = `å…¨éƒ¨ ${total} Â· é€²è¡Œä¸­ ${active} Â· å·²å®Œæˆ ${completed}`;

      enableDrag();
      save();
    }

    function btn(text, title, onClick) {
      const b = document.createElement('button');
      b.className = 'icon-btn'; b.textContent = text; b.title = title; b.type = 'button';
      b.addEventListener('click', onClick);
      return b;
    }

    function startEdit(labelEl, item) {
      labelEl.setAttribute('contenteditable', 'true');
      labelEl.focus();
      placeCaretAtEnd(labelEl);

      const finish = () => {
        labelEl.removeAttribute('contenteditable');
        const val = labelEl.textContent.trim();
        if (!val) { labelEl.textContent = item.text; return; }
        item.text = val; render();
      };
      const keyHandler = (e) => { if (e.key==='Enter'){ e.preventDefault(); finish(); } if (e.key==='Escape'){ labelEl.textContent=item.text; labelEl.blur(); }};
      labelEl.addEventListener('blur', finish, { once: true });
      labelEl.addEventListener('keydown', keyHandler, { once: true });
    }

    function placeCaretAtEnd(el) {
      const range = document.createRange(); range.selectNodeContents(el); range.collapse(false);
      const sel = window.getSelection(); sel.removeAllRanges(); sel.addRange(range);
    }

    function add(text) { const t=text.trim(); if(!t) return; state.items.unshift({id:uid(), text:t, done:false}); $('#new-task').value=''; render(); }
    function toggleDone(id) { const it=state.items.find(i=>i.id===id); if(it){it.done=!it.done; render();} }
    function remove(id) { state.items=state.items.filter(i=>i.id!==id); render(); }
    function clearCompleted() { state.items=state.items.filter(i=>!i.done); render(); }

    function enableDrag() {
      $$(".item", listEl).forEach(li => {
        li.addEventListener('dragstart', e => { e.dataTransfer.effectAllowed='move'; e.dataTransfer.setData('text/plain', li.dataset.id); li.style.opacity=.5; });
        li.addEventListener('dragend', () => li.style.opacity='');
        li.addEventListener('dragover', e=>e.preventDefault());
        li.addEventListener('drop', e=>{
          e.preventDefault();
          const draggedId = e.dataTransfer.getData('text/plain');
          const targetId = li.dataset.id;
          if(draggedId && draggedId!==targetId) reorder(draggedId,targetId);
        });
      });
    }
    function reorder(fromId, toId) {
      const fromIdx=state.items.findIndex(i=>i.id===fromId);
      const toIdx=state.items.findIndex(i=>i.id===toId);
      if(fromIdx<0||toIdx<0) return;
      const [moved]=state.items.splice(fromIdx,1);
      state.items.splice(toIdx,0,moved);
      render();
    }

    $('#add-form').addEventListener('submit', e=>{ e.preventDefault(); add($('#new-task').value); });
    $$(".toolbar .seg button").forEach(btn=>{ btn.addEventListener('click',()=>{ $$(".toolbar .seg button").forEach(b=>b.setAttribute('aria-pressed','false')); btn.setAttribute('aria-pressed','true'); state.filter=btn.dataset.filter; render(); }); });
    $('#search').addEventListener('input', e=>{ state.search=e.target.value.trim().toLowerCase(); render(); });
    $('#clear-completed').addEventListener('click', clearCompleted);
    $('#export-json').addEventListener('click', ()=>{
      const blob = new Blob([JSON.stringify(state,null,2)],{type:'application/json'});
      const url=URL.createObjectURL(blob);
      const a=document.createElement('a'); a.href=url; a.download='todo-data.json'; a.click();
      setTimeout(()=>URL.revokeObjectURL(url),1000);
    });
    $('#import-json').addEventListener('click',()=>$('#import-file').click());
    $('#import-file').addEventListener('change', e=>{
      const file=e.target.files?.[0]; if(!file) return;
      const reader=new FileReader();
      reader.onload=()=>{
        try{
          const data=JSON.parse(reader.result);
          if(data && Array.isArray(data.items)){ state={...state,...data}; render(); }
          else alert('æª”æ¡ˆæ ¼å¼ä¸æ­£ç¢º');
        }catch{ alert('è§£æå¤±æ•—ï¼Œè«‹ç¢ºèª JSON æª”æ¡ˆ'); }
      };
      reader.readAsText(file);
      e.target.value='';
    });

    load();
  </script>
</body>
</html>

-------

<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>To Do List + Chatbot</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #89f7fe, #66a6ff);
      margin: 0;
      padding: 0;
    }

    h1 {
      text-align: center;
      color: white;
      padding: 20px;
    }

    /* To Do List */
    .todo-container {
      width: 400px;
      margin: 20px auto;
      background: white;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }
    input[type="text"] {
      width: 70%;
      padding: 10px;
      margin-right: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      padding: 10px 15px;
      border: none;
      border-radius: 6px;
      background: #4caf50;
      color: white;
      cursor: pointer;
    }
    ul {
      list-style: none;
      padding: 0;
    }
    li {
      padding: 8px;
      margin: 5px 0;
      background: #f1f1f1;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
    }

    /* Chatbot Toggle Button */
    .chatbot-toggle {
      position: fixed;
      top: 50%;
      left: 0;
      transform: translateY(-50%);
      background: #ff9800;
      color: white;
      padding: 15px;
      border-radius: 0 12px 12px 0;
      cursor: pointer;
      font-size: 20px;
    }

    /* Chatbot Window */
    .chatbot {
      position: fixed;
      top: 0;
      left: -300px;
      width: 300px;
      height: 100%;
      background: #fff;
      box-shadow: 2px 0 8px rgba(0,0,0,0.2);
      display: flex;
      flex-direction: column;
      transition: left 0.3s ease;
    }
    .chat-header {
      background: #4caf50;
      color: white;
      padding: 10px;
      text-align: center;
      font-weight: bold;
    }
    .chat-body {
      flex: 1;
      padding: 10px;
      overflow-y: auto;
    }
    .chat-message {
      margin: 5px 0;
      padding: 8px;
      border-radius: 6px;
    }
    .user-message {
      background: #e1ffc7;
      align-self: flex-end;
    }
    .bot-message {
      background: #f1f1f1;
      align-self: flex-start;
    }
    .chat-footer {
      display: flex;
      padding: 10px;
      border-top: 1px solid #ddd;
    }
    .chat-footer input {
      flex: 1;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    .chat-footer button {
      margin-left: 10px;
      background: #4caf50;
    }

    .open {
      left: 0;
    }
  </style>
</head>
<body>
  <h1>æˆ‘çš„ To Do List</h1>
  <div class="todo-container">
    <input type="text" id="taskInput" placeholder="æ–°å¢ä»»å‹™...">
    <button onclick="addTask()">æ–°å¢</button>
    <ul id="taskList"></ul>
  </div>

  <!-- Chatbot Toggle -->
  <div class="chatbot-toggle" onclick="toggleChat()">ğŸ¤–</div>

  <!-- Chatbot Window -->
  <div class="chatbot" id="chatbot">
    <div class="chat-header">å°åŠ©æ‰‹</div>
    <div class="chat-body" id="chatBody"></div>
    <div class="chat-footer">
      <input type="text" id="chatInput" placeholder="è¼¸å…¥è¨Šæ¯...">
      <button onclick="sendMessage()">é€å‡º</button>
    </div>
  </div>

  <script>
    // To Do List åŠŸèƒ½
    function addTask() {
      const input = document.getElementById("taskInput");
      const task = input.value.trim();
      if (task === "") return;
      const li = document.createElement("li");
      li.textContent = task;
      const delBtn = document.createElement("button");
      delBtn.textContent = "åˆªé™¤";
      delBtn.onclick = () => li.remove();
      li.appendChild(delBtn);
      document.getElementById("taskList").appendChild(li);
      input.value = "";
    }

    // Chatbot åŠŸèƒ½
    const botReplies = [
      "ä½ å¥½å‘€ï¼ä»Šå¤©éå¾—æ€éº¼æ¨£ï¼Ÿ",
      "åŠ æ²¹ï¼Œä½ ä¸€å®šå¯ä»¥å®Œæˆä»»å‹™ï¼ğŸ’ª",
      "å–é»æ°´ï¼Œä¼‘æ¯ä¸€ä¸‹å†ç¹¼çºŒå§ï½",
      "æˆ‘åœ¨é€™è£¡é™ªä½ ï¼Œä¸€èµ·åŠªåŠ›ï¼ğŸ¤–",
      "è½èµ·ä¾†å¾ˆä¸éŒ¯å‘¢ï¼",
      "æˆ‘ä¹Ÿé€™éº¼è¦ºå¾— ğŸ‘"
    ];

    function toggleChat() {
      document.getElementById("chatbot").classList.toggle("open");
    }

    function sendMessage() {
      const input = document.getElementById("chatInput");
      const message = input.value.trim();
      if (message === "") return;

      // é¡¯ç¤ºç”¨æˆ¶è¨Šæ¯
      addMessage(message, "user-message");

      // éš¨æ©Ÿå›è¦†
      setTimeout(() => {
        const reply = botReplies[Math.floor(Math.random() * botReplies.length)];
        addMessage(reply, "bot-message");
      }, 500);

      input.value = "";
    }

    function addMessage(text, className) {
      const chatBody = document.getElementById("chatBody");
      const msg = document.createElement("div");
      msg.className = "chat-message " + className;
      msg.textContent = text;
      chatBody.appendChild(msg);
      chatBody.scrollTop = chatBody.scrollHeight;
    }
  </script>
</body>
</html>
